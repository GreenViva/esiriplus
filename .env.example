# ================================================================
# eSIRI EDGE FUNCTIONS — ENVIRONMENT VARIABLES
# Copy this to .env.local and fill in all values.
# Set production values via: supabase secrets set KEY=VALUE
# ================================================================

# ── Supabase ─────────────────────────────────────────────────────
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_JWT_SECRET=your-jwt-secret

# ── CORS ─────────────────────────────────────────────────────────
# Android app origin (use your app's custom scheme or domain)
# For Android apps calling via HTTPS, this is the backend domain
# For web portal: https://admin.esiri.co.ke
ALLOWED_ORIGIN=https://admin.esiri.co.ke

# ── Upstash Redis (Rate Limiting) ─────────────────────────────────
UPSTASH_REDIS_REST_URL=https://your-upstash-url.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# ── Payment Gateway ───────────────────────────────────────────────
# PAYMENT_ENV controls which mode the payment functions run in:
#   "mock"       → No real API. Auto-completes payment after 3s. Use for dev.
#   "sandbox"    → Safaricom sandbox API. Needs sandbox credentials below.
#   "production" → Live API. Real money. Only for production.
PAYMENT_ENV=mock

# M-Pesa credentials (only needed when PAYMENT_ENV=sandbox or production)
# Leave blank when PAYMENT_ENV=mock
MPESA_CONSUMER_KEY=
MPESA_CONSUMER_SECRET=
MPESA_SHORTCODE=
MPESA_PASSKEY=
# Must point to your deployed mpesa-callback edge function URL:
MPESA_CALLBACK_URL=https://your-project-ref.supabase.co/functions/v1/mpesa-callback

# ── VideoSDK.live ─────────────────────────────────────────────────
VIDEOSDK_API_KEY=your-videosdk-api-key
VIDEOSDK_SECRET=your-videosdk-secret

# ── Firebase Cloud Messaging (FCM) ────────────────────────────────
FCM_PROJECT_ID=your-firebase-project-id
# Use a service account OAuth2 token in production.
# For quick setup, use the legacy server key (FCM v1 recommended):
FCM_SERVER_KEY=your-fcm-server-key

# ── Web Push (VAPID) ──────────────────────────────────────────────
# Generate with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key

# ── OpenAI (AI Report Generation) ────────────────────────────────
OPENAI_API_KEY=sk-your-openai-key

# ── Cron Security ─────────────────────────────────────────────────
# Random secret for protecting the appointment-reminder cron endpoint
CRON_SECRET=generate-a-long-random-string-here
